{
  "pluginAlias": "Pushcutter",
  "headerDisplay": "Homebridge plugin for Pushcut notifications.",
  "footerDisplay": "Please visit https://github.com/kernie66/homebridge-pushcutter for more details.",
  "pluginType": "platform",
  "singular": false,
  "schema":
  {
    "type": "object",
    "properties": 
    {
      "name": 
      {
        "description": "Plugin name as displayed in the homebridge log.",
        "type": "string",
        "required": true,
        "default": "Pushcutter"
      },
      "useApiKey":
      {
        "title": "Use Pushcut API",
        "type": "boolean",
        "default": true
      },
      "apiKey": 
      {
        "title": "Pushcut API Key",
        "type": "string",
        "placeholder": "Enter API key"
      },
      "apiUrl":
      {
        "title": "Pushcut API URL",
        "type": "string",
        "default": "https://api.pushcut.io/v1/"
      },
      "devices": 
      {
        "title": "Pushcut devices (leave blank for all)",
        "type": "string",
        "required": false,
        "placeholder": "device1,device2,...",
        "description": "Device list seperated by comma - WITHOUT SPACE after comma!"
      },        
      "notifications": 
      {
        "title": "Pushcut notifications",
        "notitle": true,
        "type": "array",
        "items": 
        {
          "type": "object",
          "properties": 
          {
            "switchName": 
            {
              "title": "Notification switch name",
              "description": "Name of the notification switch.",
              "type": "string",
              "required": true
            },
	          "notificationName":
            {
              "title": "Pushcut notification name",
              "description": "Name of your Pushcut notification to use for the switch.",
              "type": "string",
              "required": false
            },
            "useWebhook":
            {
              "title": "Use webhook",
              "description": "Enable the use of webhook instead of API key",
              "type": "boolean",
              "default": false
            },
            "webhook":
            {
              "title": "Pushcut notification webhook",
              "description": "Webhook for the notification, when not using the API key",
              "type": "string"
            },
            "sound": 
            {
              "title": "Notification sound",
              "type": "string",
              "default": "system",
              "oneOf": [
                {
                  "title": "vibrateOnly",
                  "enum": [
                    "vibrateOnly"
                  ]
                },
                {
                  "title": "system",
                  "enum": [
                    "system"
                  ]
                },
                {
                  "title": "subtle",
                  "enum": [
                    "subtle"
                  ]
                },
                {
                  "title": "question",
                  "enum": [
                    "question"
                  ]
                },
                {
                  "title": "jobDone",
                  "enum": [
                    "jobDone"
                  ]
                },
                {
                  "title": "problem",
                  "enum": [
                    "problem"
                  ]
                },
                {
                  "title": "loud",
                  "enum": [
                    "loud"
                  ]
                },
                {
                  "title": "lasers",
                  "enum": [
                    "lasers"
                  ]
                }
              ]
            }
          }
        }
      }
    }
  },
  "form": [
    {
      "type": "help",
      "helpvalue": "<div class=\"alert alert-info\">Homebridge Pushcut Notifications</div>"
    },
    {
      "key": "name",
      "type": "text"
    },
    {
      "type": "help",
      "helpvalue": "<h6>Use the Pushcut API for quick access to the notifications.</h6><em>If the API is not used, you must provide a webhook for each notification.</em>"
    },
    {
      "key": "useApiKey",
      "type": "boolean"
    },
    {
      "key": "apiKey",
      "condition": "useApiKey",
      "type": "text"
    },
    {
      "key": "apiUrl",
      "condition": "useApiKey",
      "type": "text"
    },
    {
      "key": "devices",
      "type": "text"
    },
    {
      "nodescription": true,
      "notitle": false,
      "key": "notifications",
      "title": "Notifications",
      "type": "array",
      "items": [
        {
          "type": "section",
          "notitle": true,
          "items": [
            {
              "key": "notifications[]",
              "title": "{{ 'Notification switch ' + $index + ' settings' }}",
              "items": [
                {
		              "type": "section",
	                "items": ["notifications[].switchName"]
                },
                {
		              "type": "section",
                  "condition": "useApiKey",
	                "items": ["notifications[].notificationName"]
                },
                {
                  "type": "help",
                  "helpvalue": "<h6>You can use the notification webhook directly.</h6><em>If the Pushcut API key is not used, you must provide a webhook instead.</em>"
                },
                {
                  "type": "section",
                  "items": ["notifications[].useWebhook"]
                },
                {
                  "type": "section",
                  "condition": "notifications[arrayIndex].useWebhook",
                  "items": ["notifications[].webhook"]
                },
                {
		              "type": "section",
	                "items": ["notifications[].sound"]
                }
              ]
	          }
          ]
        }
      ]
    }
  ]
}
